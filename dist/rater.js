define("moe/rater/1.1.0/rater",[],function(a,b,c){var d=window.jQuery||window.Zepto,e=".rater-star{position:relative;list-style:none;margin:0;padding:0;background-repeat:repeat-x;background-position:left top}.rater-star-item,.rater-star-item-current,.rater-star-item-hover{position:absolute;top:0;left:0;background-repeat:repeat-x}.rater-star-item{background-position:-100% -100%}.rater-star-item-hover{background-position:left bottom;cursor:pointer}.rater-star-item-current{background-position:left center}";d('<style type="text/css">'+e+"</style>").appendTo("head");var f=a.resolve("./star.png#");d.fn.prevAll=d.fn.prevAll||function(a){for(var b=d(),c=this.prev();c.length;)("undefined"==typeof a||c.is(a))&&(b=b.add(c)),c=c.prev();return b},d.fn.rater=function(a){return this.each(function(){var b={enabled:!0,url:"",method:"post",min:1,max:3,step:1,value:null,after_click:null,before_ajax:null,after_ajax:null,image:f,width:25,height:25};a&&d.extend(b,a);var c=d('<ul class="rater-star"></ul>');c.css("background-image","url("+b.image+")"),c.css("height",b.height),c.css("width",b.width*((b.max-b.min)/b.step+1));var e=d('<li class="rater-star-item-current"></li>');if(e.css("background-image","url("+b.image+")"),e.css("height",b.height),e.css("width",0),e.css("z-index",b.max/b.step+1),b.value&&e.css("width",((b.value-b.min)/b.step+1)*b.width),c.append(e),b.enabled)for(var g=b.min;g<=b.max;g+=b.step)e=d('<li class="rater-star-item"></li>'),e.attr("title",g),e.css("height",b.height),e.css("width",b.width*((g-b.min)/b.step+1)),e.css("z-index",(b.max-g)/b.step+1),e.css("background-image","url("+b.image+")"),c.append(e);b.enabled&&c.mouseover(function(){d(this).find(".rater-star-item-current").hide()}).mouseout(function(){d(this).find(".rater-star-item-current").show()}),c.find(".rater-star-item").mouseover(function(){d(this).attr("class","rater-star-item-hover")}).mouseout(function(){d(this).attr("class","rater-star-item")}).click(function(){d(this).prevAll(".rater-star-item-current").css("width",d(this).width());var a=(b.max-b.min)/b.step+1,c=d(this).width()/b.width,e=b.min+(c-1)*b.step,f={value:e,number:c,count:a,min:b.min,max:b.max};"function"==typeof b.after_click&&b.after_click(f,d(this)),b.url&&d.ajax({data:f,type:b.method,url:b.url,beforeSend:function(){"function"==typeof b.before_ajax&&b.before_ajax(f)},success:function(a){"function"==typeof b.after_ajax&&b.after_ajax(a)}})}),d(this).html(c)})},c.exports=d});
